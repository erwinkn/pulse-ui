---
title: FolderLock
---

Context manager for folder lock management.

Coordinates across processes and Uvicorn reloads using environment variables.
The process that creates the lock (typically the CLI) sets PULSE_LOCK_OWNER.
Child processes (uvicorn workers, reloaded processes) inherit this env var
and know not to delete the lock on exit.

Example:
    with FolderLock(web_root):
        # Protected region
        pass

## Attributes

<PyAttribute name={"lock_path"} type={"Path"} value={"lock_path_for_web_root(web_root, filename)"} />

## Functions

<PyFunction name={"__init__"} type={"(self, web_root, *, filename='.pulse/lock')"}>

Initialize FolderLock.

<PySourceCode >

```python
def __init__(self, web_root: Path, *, filename: str = ".pulse/lock"):
	"""
	Initialize FolderLock.

	Args:
	    web_root: Path to the web root directory
	    filename: Name of the lock file (default: ".pulse/lock")
	"""
	self.lock_path: Path = lock_path_for_web_root(web_root, filename)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"web_root"} type={"Path"} value={undefined}>

Path to the web root directory

</PyParameter>
<PyParameter name={"filename"} type={"str"} value={"'.pulse/lock'"}>

Name of the lock file (default: ".pulse/lock")

</PyParameter>

</div>

<PyFunctionReturn type={null} />

</PyFunction>

<PyFunction name={"__enter__"} type={"(self)"}>

<PySourceCode >

```python
def __enter__(self):
	_create_lock_file(self.lock_path)
	return self
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>

<PyFunction name={"__exit__"} type={"(self, exc_type, exc_val, exc_tb) -> bool"}>

<PySourceCode >

```python
def __exit__(
	self,
	exc_type: type[BaseException] | None,
	exc_val: BaseException | None,
	exc_tb: TracebackType | None,
) -> bool:
	_remove_lock_file(self.lock_path)
	return False
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"exc_type"} type={"type[BaseException] | None"} value={null} />
<PyParameter name={"exc_val"} type={"BaseException | None"} value={null} />
<PyParameter name={"exc_tb"} type={"TracebackType | None"} value={null} />

</div>

<PyFunctionReturn type={"bool"} />

</PyFunction>