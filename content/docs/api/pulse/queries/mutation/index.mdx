---
title: mutation
---

<PyAttribute name={"T"} type={null} value={"TypeVar('T')"} />

<PyAttribute name={"TState"} type={null} value={"TypeVar('TState', bound=State)"} />

<PyAttribute name={"R"} type={null} value={"TypeVar('R')"} />

<PyAttribute name={"P"} type={null} value={"ParamSpec('P')"} />

<Tabs items={["Class","Functions"]}>

<Tab value={"Class"}>

<Cards >

<Card title={"MutationResult"} href={"/docs/api/pulse/queries/mutation/MutationResult"} />
<Card title={"MutationProperty"} href={"/docs/api/pulse/queries/mutation/MutationProperty"} />

</Cards>

</Tab>
<Tab value={"Functions"}>

<PyFunction name={"mutation"} type={"(fn=None)"}>

Decorator for async mutations (write operations) on State methods.

Creates a mutation wrapper that tracks execution state and provides
callbacks for success/error handling. Unlike queries, mutations are
not cached and must be explicitly called.

Example:

```python
class UserState(ps.State):
    @ps.mutation
    async def update_name(self, name: str) -> User:
        return await api.update_user(name=name)

    @update_name.on_success
    def _on_success(self, data: User):
        self.user.invalidate()
```

Calling the mutation:

```python
result = await state.update_name("New Name")
```

<PySourceCode >

```python
def mutation(
	fn: Callable[Concatenate[TState, P], Awaitable[T]] | None = None,
):
	"""Decorator for async mutations (write operations) on State methods.

	Creates a mutation wrapper that tracks execution state and provides
	callbacks for success/error handling. Unlike queries, mutations are
	not cached and must be explicitly called.

	Args:
		fn: The async method to decorate (when used without parentheses).

	Returns:
		MutationProperty that creates MutationResult instances when accessed.

	Example:

	\```python
	class UserState(ps.State):
	    @ps.mutation
	    async def update_name(self, name: str) -> User:
	        return await api.update_user(name=name)

	    @update_name.on_success
	    def _on_success(self, data: User):
	        self.user.invalidate()
	\```

	Calling the mutation:

	\```python
	result = await state.update_name("New Name")
	\```
	"""

	def decorator(func: Callable[Concatenate[TState, P], Awaitable[T]], /):
		sig = inspect.signature(func)
		params = list(sig.parameters.values())

		if len(params) == 0 or params[0].name != "self":
			raise TypeError("@mutation method must have 'self' as first argument")

		return MutationProperty(func.__name__, func)

	if fn:
		return decorator(fn)
	return decorator
```

</PySourceCode>

<div >

<PyParameter name={"fn"} type={"Callable[Concatenate[TState, P], Awaitable[T]] | None"} value={"None"}>

The async method to decorate (when used without parentheses).

</PyParameter>

</div>

<PyFunctionReturn type={null}>

MutationProperty that creates MutationResult instances when accessed.

</PyFunctionReturn>

</PyFunction>

</Tab>

</Tabs>