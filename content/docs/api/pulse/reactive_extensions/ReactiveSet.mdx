---
title: ReactiveSet
---

A set with per-element membership reactivity.

`x in s` reads a membership Signal for element `x`. Mutations update
membership Signals for affected elements. Iteration subscribes to
membership signals for all elements.

## Attributes

<PyAttribute name={"__slots__"} type={null} value={"('_signals',)"} />

## Functions

<PyFunction name={"__init__"} type={"(self, initial=None) -> None"}>

<PySourceCode >

```python
def __init__(self, initial: Iterable[T1] | None = None) -> None:
	super().__init__()
	self._signals: dict[T1, Signal[bool]] = {}
	if initial:
		for v in initial:
			vv = reactive(v)
			super().add(vv)
			self._signals[vv] = Signal(True)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"initial"} type={"Iterable[T1] | None"} value={"None"} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"__contains__"} type={"(self, element) -> bool"}>

<PySourceCode >

```python
@override
def __contains__(self, element: T1) -> bool:  # pyright: ignore[reportIncompatibleMethodOverride]
	sig = self._signals.get(element)
	if sig is None:
		present = set.__contains__(self, element)
		self._signals[element] = Signal(bool(present))
		sig = self._signals[element]
	return bool(sig.read())
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"element"} type={"T1"} value={null} />

</div>

<PyFunctionReturn type={"bool"} />

</PyFunction>

<PyFunction name={"__iter__"} type={"(self) -> Iterator[T1]"}>

<PySourceCode >

```python
@override
def __iter__(self) -> Iterator[T1]:
	# Subscribe to membership signals and return present elements
	present = [elem for elem, sig in self._signals.items() if sig.read()]
	return iter(present)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={"collections.abc.Iterator[pulse.reactive_extensions.T1]"} />

</PyFunction>

<PyFunction name={"add"} type={"(self, element) -> None"}>

<PySourceCode >

```python
@override
def add(self, element: T1) -> None:
	element = reactive(element)
	super().add(element)
	sig = self._signals.get(element)
	if sig is None:
		self._signals[element] = Signal(True)
	else:
		sig.write(True)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"element"} type={"T1"} value={null} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"discard"} type={"(self, element) -> None"}>

<PySourceCode >

```python
@override
def discard(self, element: T1) -> None:
	element = reactive(element)
	if element in self:
		super().discard(element)
		sig = self._signals.get(element)
		if sig is None:
			self._signals[element] = Signal(False)
		else:
			sig.write(False)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"element"} type={"T1"} value={null} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"remove"} type={"(self, element) -> None"}>

<PySourceCode >

```python
@override
def remove(self, element: T1) -> None:
	if element not in self:
		raise KeyError(element)
	self.discard(element)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"element"} type={"T1"} value={null} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"clear"} type={"(self) -> None"}>

<PySourceCode >

```python
@override
def clear(self) -> None:
	for v in list(self):
		self.discard(v)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"update"} type={"(self, *others) -> None"}>

<PySourceCode >

```python
@override
def update(self, *others: Iterable[T1]) -> None:
	for it in others:
		for v in it:
			self.add(v)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"others"} type={"Iterable[T1]"} value={"()"} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"difference_update"} type={"(self, *others) -> None"}>

<PySourceCode >

```python
@override
def difference_update(self, *others: Iterable[T1]) -> None:
	to_remove: set[T1] = set()
	for it in others:
		for v in it:
			if v in self:
				to_remove.add(v)
	for v in to_remove:
		self.discard(v)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"others"} type={"Iterable[T1]"} value={"()"} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"unwrap"} type={"(self) -> set[_Any]"}>

Return a plain set while subscribing to membership signals.

<PySourceCode >

```python
def unwrap(self) -> set[_Any]:
	"""Return a plain set while subscribing to membership signals.

	Returns:
		A plain set with all reactive containers recursively unwrapped.
	"""
	result: set[_Any] = set()
	for value in set.__iter__(self):
		_ = value in self
		result.add(unwrap(value))
	return result
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={"set"}>

A plain set with all reactive containers recursively unwrapped.

</PyFunctionReturn>

</PyFunction>

<PyFunction name={"__copy__"} type={"(self)"}>

<PySourceCode >

```python
def __copy__(self):
	return type(self)(list(set.__iter__(self)))  # pyright: ignore[reportUnknownArgumentType]
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>

<PyFunction name={"__deepcopy__"} type={"(self, memo)"}>

<PySourceCode >

```python
def __deepcopy__(self, memo: dict[int, _Any]):
	if id(self) in memo:
		return memo[id(self)]
	result = type(self)()
	memo[id(self)] = result
	for value in set.__iter__(self):
		result.add(copy.deepcopy(cast(T1, value), memo))
	return result
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"memo"} type={"dict[int, _Any]"} value={null} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>