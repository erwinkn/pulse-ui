---
title: StateEffect
---

Descriptor for side effects on State classes.

StateEffect wraps a method that performs side effects when its dependencies
change. The effect is initialized when the State instance is created and
disposed when the State is disposed.

Created automatically when using the @ps.effect decorator on a State method.
Supports both sync and async methods.

## Attributes

<PyAttribute name={"fn"} type={"Callable[[State], T]"} value={"fn"} />

<PyAttribute name={"name"} type={"str | None"} value={"name"} />

<PyAttribute name={"immediate"} type={"bool"} value={"immediate"} />

<PyAttribute name={"on_error"} type={"Callable[[Exception], None] | None"} value={"on_error"} />

<PyAttribute name={"lazy"} type={"bool"} value={"lazy"} />

<PyAttribute name={"deps"} type={"list[Signal[Any] | Computed[Any]] | None"} value={"deps"} />

<PyAttribute name={"interval"} type={"float | None"} value={"interval"} />

## Functions

<PyFunction name={"__init__"} type={"(self, fn, name=None, immediate=False, lazy=False, on_error=None, deps=None, interval=None)"}>

<PySourceCode >

```python
def __init__(
	self,
	fn: "Callable[[State], T]",
	name: str | None = None,
	immediate: bool = False,
	lazy: bool = False,
	on_error: "Callable[[Exception], None] | None" = None,
	deps: "list[Signal[Any] | Computed[Any]] | None" = None,
	interval: float | None = None,
):
	self.fn = fn
	self.name = name
	self.immediate = immediate
	self.on_error = on_error
	self.lazy = lazy
	self.deps = deps
	self.interval = interval
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"fn"} type={"Callable[[State], T]"} value={null} />
<PyParameter name={"name"} type={"str | None"} value={"None"} />
<PyParameter name={"immediate"} type={"bool"} value={"False"} />
<PyParameter name={"lazy"} type={"bool"} value={"False"} />
<PyParameter name={"on_error"} type={"Callable[[Exception], None] | None"} value={"None"} />
<PyParameter name={"deps"} type={"list[Signal[Any] | Computed[Any]] | None"} value={"None"} />
<PyParameter name={"interval"} type={"float | None"} value={"None"} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>

<PyFunction name={"initialize"} type={"(self, state, name)"}>

<PySourceCode >

```python
@override
def initialize(self, state: "State", name: str):
	bound_method = self.fn.__get__(state, state.__class__)
	# Select sync/async effect type based on bound method
	if inspect.iscoroutinefunction(bound_method):
		effect: Effect = AsyncEffect(
			bound_method,  # type: ignore[arg-type]
			name=self.name or f"{state.__class__.__name__}.{name}",
			lazy=self.lazy,
			on_error=self.on_error,
			deps=self.deps,
			interval=self.interval,
		)
	else:
		effect = Effect(
			bound_method,  # type: ignore[arg-type]
			name=self.name or f"{state.__class__.__name__}.{name}",
			immediate=self.immediate,
			lazy=self.lazy,
			on_error=self.on_error,
			deps=self.deps,
			interval=self.interval,
		)
	setattr(state, name, effect)
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"state"} type={"State"} value={null} />
<PyParameter name={"name"} type={"str"} value={null} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>