---
title: "ReactiveContext"
---

Composite context holding epoch, batch, and scope.

Use as a context manager to set up a complete reactive environment.

## Attributes

<PyAttribute name={"epoch"} type={"Epoch"} value={"epoch or Epoch()"}>

Global version counter.

</PyAttribute>

<PyAttribute name={"batch"} type={"Batch"} value={"batch or GlobalBatch()"}>

Current batch for effect scheduling.

</PyAttribute>

<PyAttribute name={"scope"} type={"Scope | None"} value={"scope"}>

Current scope for dependency tracking.

</PyAttribute>

<PyAttribute name={"on_effect_error"} type={"Callable[[Effect, Exception], None] | None"} value={"on_effect_error"}>

Global effect error handler.

</PyAttribute>

<PyAttribute name={"_tokens"} type={"list[Any]"} value={"[]"} />

## Functions

<PyFunction name={"__init__"} type={"(self, epoch=None, batch=None, scope=None, on_effect_error=None) -> None"}>

<PySourceCode >

```python
def __init__(
	self,
	epoch: Epoch | None = None,
	batch: Batch | None = None,
	scope: Scope | None = None,
	on_effect_error: Callable[[Effect, Exception], None] | None = None,
) -> None:
	self.epoch = epoch or Epoch()
	self.batch = batch or GlobalBatch()
	self.scope = scope
	# Optional effect error handler set by integrators (e.g., session)
	self.on_effect_error = on_effect_error
	self._tokens = []
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"epoch"} type={"Epoch | None"} value={"None"} />
<PyParameter name={"batch"} type={"Batch | None"} value={"None"} />
<PyParameter name={"scope"} type={"Scope | None"} value={"None"} />
<PyParameter name={"on_effect_error"} type={"Callable[[Effect, Exception], None] | None"} value={"None"} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"get_epoch"} type={"(self) -> int"}>

<PySourceCode >

```python
def get_epoch(self) -> int:
	return self.epoch.current
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={"int"} />

</PyFunction>

<PyFunction name={"increment_epoch"} type={"(self) -> None"}>

<PySourceCode >

```python
def increment_epoch(self) -> None:
	self.epoch.current += 1
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={"None"} />

</PyFunction>

<PyFunction name={"__enter__"} type={"(self)"}>

<PySourceCode >

```python
def __enter__(self):
	self._tokens.append(REACTIVE_CONTEXT.set(self))
	return self
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />

</div>

<PyFunctionReturn type={null} />

</PyFunction>

<PyFunction name={"__exit__"} type={"(self, exc_type, exc_value, exc_tb) -> Literal[False]"}>

<PySourceCode >

```python
def __exit__(
	self,
	exc_type: type[BaseException] | None,
	exc_value: BaseException | None,
	exc_tb: Any,
) -> Literal[False]:
	REACTIVE_CONTEXT.reset(self._tokens.pop())
	return False
```

</PySourceCode>

<div >

<PyParameter name={"self"} type={null} value={null} />
<PyParameter name={"exc_type"} type={"type[BaseException] | None"} value={null} />
<PyParameter name={"exc_value"} type={"BaseException | None"} value={null} />
<PyParameter name={"exc_tb"} type={"Any"} value={null} />

</div>

<PyFunctionReturn type={"typing.Literal[False]"} />

</PyFunction>